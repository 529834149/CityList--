<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control"
          content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta content="telephone=no" name="format-detection">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html,charset=UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <title>移动【城市】</title>
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/phone-city.css">
</head>
<body>
<!--<input type="text" id='search'>-->
<div class='citybox'>
    <input type="search" id='search-city-fast' class='form-input' style='width: 80%;margin: 10px auto;'>
    <!-- 默认打开页面 -->
    <div class='citypanel'>
        <!--城市类型-->
        <ul class='city-type'>
            <li rel='Domestic' class='active'>国内</li>
            <li rel='International'>国际/地区</li>
        </ul>
        <!--当前选择-->
        <div class='current-city'>
            <span>当前</span>
            <ul>
                <li data-options='BJS'>北京首都</li>
                <li data-options='SH'>上海</li>
            </ul>
        </div>
        <!--城市盒子-->
        <div class='region-box' rel='Domestic' style='display: block'>
            <!--热门城市-->
            <div class='hot-city' rel='hot'>
                <span>热门</span>
                <ul>
                    <li data-options='SH'>上海</li>
                    <li data-options='SHH'>上海虹桥</li>
                    <li data-options='GZ'>广州</li>
                    <li data-options='XA'>西安</li>
                </ul>
            </div>
            <div class='list' rel='A'>
                <span class='letter'>A</span>
                <ul>
                    <li data-options='TSN'>
                        <a href=''>
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class='list' rel='B'>
                <span class='letter'>B</span>
                <ul>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class='list' rel='C'>
                <span class='letter'>C</span>
                <ul>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class='list' rel='D'>
                <span class='letter'>D</span>
                <ul>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                </ul>
            </div>
            <div class='list' rel='E'>
                <span class='letter'>E</span>
                <ul>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                    <li data-options='TSN'>
                        <a href="">
                            <span class='cityname'>天津</span>
                            <span class='citycode'>TSN</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class='region-box' rel='International' style='display: none;'></div>
        <!--右侧固定字母导航-->
        <div class='pos-nav' style='display: block'>
            <ul>
                <li rel='hot'>热门</li>
                <li rel='A'>A</li>
                <li rel='B'>B</li>
                <li rel='C'>C</li>
                <li rel='D'>D</li>
                <li rel='A'>A</li>
                <li rel='B'>B</li>
                <li rel='C'>C</li>
                <li rel='D'>D</li>
                <li rel='A'>A</li>
                <li rel='B'>B</li>
                <li rel='C'>C</li>
                <li rel='D'>D</li>
                <li rel='A'>A</li>
                <li rel='B'>B</li>
                <li rel='C'>C</li>
                <li rel='D'>D</li>
                <li rel='A'>A</li>
                <li rel='B'>B</li>
                <li rel='C'>C</li>
                <li rel='D'>D</li>
                <li rel='A'>A</li>
                <li rel='B'>B</li>
                <li rel='C'>C</li>
                <li rel='D'>D</li>
            </ul>
        </div>
        <!--导航选中的放大字母-->
        <div class='big-letter'>A</div>
    </div>
    <!-- 模糊查询列表展示 -->
    <div class='citylist' style='display: none'>
        <ul>
            <li>
                <span class='cityname'>天津</span>
                <span class='citycode'>TSN</span>
                <span class='cityalpha'>tianjin</span>
            </li>
            <li>
                <span class='cityname'>天津</span>
                <span class='citycode'>TSN</span>
                <span class='cityalpha'>tianjin</span>
            </li>
            <li>
                <span class='cityname'>天津</span>
                <span class='citycode'>TSN</span>
                <span class='cityalpha'>tianjin</span>
            </li>
        </ul>
    </div>
</div>
<script src='js/jquery-1.10.2.min.js'></script>
<script src='js/mobile-city.js'></script>
<script>
    $('.city-type').on('click', 'li', function () {
        $(this).addClass('active').siblings().removeClass('active');
    });


    $(".pos-nav").on('click', 'li', function (evt) {
        $(this).addClass('active').siblings().removeClass('active');
        var letter = $(this).attr('rel');
        $(".big-letter").fadeIn(200).html(letter);
        $(".big-letter").fadeOut(300);

        var scroll_offset = $(".region-box[rel='Domestic'] div[rel='" + letter + "']").offset();
        $("body,html").animate({
            scrollTop: scroll_offset.top - 10
        }, 0);
    });

    var popCnt = $(".pos-nav");
    // 获取滚动条最高高度(内容总高度-显示的高度)
    var maxScrollTop = popCnt[0].scrollHeight - popCnt.height(), touchStartY = 0;
    $("body").on("touchstart", function (e) {
        touchStartY = e.originalEvent.targetTouches[0].pageY;
    }).on("touchmove", function (e) {

        // 值是负数为往上滑，说明还在往下滚
        // 正数为往下滑，说明还在往上滚
        var moveLength = e.originalEvent.targetTouches[0].pageY
            - touchStartY;
        if (e.target.className != "pop-content"
            && $(e.target).parents(".pop-content").length == 0) {
            e.preventDefault();
        } else {
            var scrollTop = popCnt.scrollTop();
            console.log(scrollTop);
            // if(如果滚动底了还在往下滚 || 如果滚到头了还在往上滚 ||
            // 或者只是alert的情况)
            if ((scrollTop >= maxScrollTop && moveLength < 0)
                || (scrollTop <= 0 && moveLength > 0)) {
                e.preventDefault();
            }
        }
    });
</script>
</body>
</html>